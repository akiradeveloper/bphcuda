load "test.rake"

require "bphcuda"

### Compiler Setting ###
# Every Test will be done in this compilation setting.

cxx = Bphcuda.make_default_compiler
cxx.use_real_precision("double")
cxx.optimize(2)
cxx.disable_pretty_print # disable debug mode
cxx.disable_assertion # disable debug mode
cxx << "-use_fast_math"
cxx << "-Xcompiler -march=i686"
#cxx << "-Xcompiler -Wall"
cxx << "-Xcompiler -mieee-fp"

dirs = [
"wallshock_x",
"shocktube_x",
"sjogreen_x",
"noh2d_xy"]

dirs.each do |d|
  cxx.make_compile_task(d)
end

desc "Run The Benchmark" 
task "run" do
  cd "rb" do
    sh "rake run"
  end
end

task "draw" do
  cd "rb" do
    sh "rake draw"
  end
end
